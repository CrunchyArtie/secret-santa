$colors: "green" #24D024, "yellow" #FFD700, "pink" #f53896, "red" #fb4545, "blue" #0A53DE;
$availableTiming: '0.75', '1', '1.25', '1.5';

@function str-replace($string, $search, $replace: '') {
  $index: str-index($string, $search);

  @if $index {
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
  }

  @return $string;
}

@each $timing in $availableTiming {
  @each $name, $color in $colors {
    .#{$name}-#{str-replace($timing, '.', '-')} {
      background-color: $color;
      animation: lightning-#{$name}-#{str-replace($timing, '.', '-')} #{$timing}s infinite
    }

    @keyframes lightning-#{$name}-#{str-replace($timing, '.', '-')} {
      0% {
        box-shadow: 10px 0 70px 20px #{$color};
      }
      50% {
        box-shadow: none;
      }
      100% {
        box-shadow: 10px 0 70px 20px #{$color};
      }
    }
  }

}


.lights {
  position: relative;
  z-index: 100;
  width: 320px;
  margin: 125px auto 0 auto;
  padding-left: 55px;

  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  align-content: flex-start;

  .letter {
    position: relative;
    list-style: none;
    display: inline-block;
    width: 18px;
    height: 42px;
    border-radius: 50%;
    top: 15px;
    text-align: center;
    margin: 10px;

    span {
      text-align: center;
      text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
      font-size: 20px;
    }

    &:before {
      content: "";
      position: absolute;
      background: #222;
      width: 15px;
      height: 13px;
      border-radius: 3px;
      top: -6px;
      left: 2px;
    }

    &.dummy-letter.dead {
      transition: background-color 3s, color 3s, animation 5s;
      background-color: black;
      box-shadow: none;
      animation: none;
      color: black;
      text-shadow: none;
      transition-timing-function: cubic-bezier(0.45, 0, 0.55, 1);

      span {
        visibility: hidden;
        opacity: 0;
        transition: opacity 2.5s, visibility 2.5s;
        transition-timing-function: cubic-bezier(0.45, 0, 0.55, 1);
      }

      &.hide {
        transform: translateX(0) scale(0.5);
        visibility: hidden;
        opacity: 0;
        margin: 0;
        width: 0;
        height: 0;
        transition: transform 3s, opacity 3s, visibility 3s, width 1s 2.5s, height 1s 2.5s, margin 1s 2.5s;
        transition-timing-function: cubic-bezier(0.45, 0, 0.55, 1);
      }
    }
  }
}

@keyframes no-divider {
  from {
  }
  to {
    position: absolute;
  }
}

.divider {
  width: 100%;

  &.isEnding {
    animation: no-divider 0.5s 3s forwards;
  }
}


.disclaimer {
  transform: translateX(0) scale(0.5);
  visibility: hidden;
  opacity: 0;
  margin: 0;
  width: 0;
  height: 0;
  align-items: center;
  text-align: center;
  position: absolute;
  top: 100px;

  &.isEnding {
    transform: none;
    visibility: visible;
    opacity: 1;
    margin: auto;
    width: 100%;
    transition: transform 1s 3s, opacity 1s 3s, visibility 1s 3s, height 1s 3s, margin 1s 3s;
    transition-timing-function: cubic-bezier(0.45, 0, 0.55, 1);
  }

}
